### :apple: Interval Tree

- 여러 폐구간이 있을 때 겹치는 경우를 계산하는 트리
- 폐구간의 insert, delete, search
- search는 겹치는 구간을 계산

- [a , b] , [c ,d] 두 구간이 겹친다는 것은
  a <= d && c <= b 이여야 한다.

- interval tree 는 균형트리고 트리를 구성하는 키는 구간의 첫번째 값이다.

```
총 10개의 구간이 있을 때.
[0, 3]    [5, 8]    [6, 10]
[8, 9]    [15, 23]   [16, 21]
[17, 19]   [19, 20]   [25 30]  [26, 26]
```

![image](https://user-images.githubusercontent.com/46587806/111426066-673e0180-8737-11eb-8b3a-629d91e5d264.png)

- max라는 값은 그 노드를 루트로 하는 트리가 가지는 가장 큰 범위의 값을 저장한다.

- [0 3] 인 단말노드는 3이고
- [5 8] 인 노드는 서브트리의 가장 큰 범위가 10이라 10을 가진다.
- 결국 자식노드에서의 큰값을 max로 지정한다.

---

어떤 구간 [a, b] 를 트리에서 겹치는것이 있는지 판단하려면

1. 노드가 겹치는지 판단한다. 겹치면 true 리턴

2. 겹치지 않을 때 만약 b가 트리의 k_first보다 작으면 트리의 오른쪽 트리에서는 정답이 있을 수 없다.

3. b가 key 보다 클 때 진행방향은 어디로도 가능하나 max 값을 판단해서 더 내려갈 필요가 있는지 판단한다.

---

### :orange: 점에 포함되는 모든 페구간 구하기

- n개의 폐구간의 점은 모두 2n 개 그 중앙이되는 점 x를 중심으로 3개의 집합으로 분리

1. x에 포함되지 않는 왼쪽 구간
2. x에 포함되지 않는 오른쪽 구간
3. x를 포함하는 구간

![image](https://user-images.githubusercontent.com/46587806/111428837-65763d00-873b-11eb-9a89-a8ef61458d1a.png)
